---
const APP_URL = 'https://expense-tracker-dashboard-omega.vercel.app/auth';
const navLinks = [
  { label: 'Features', href: '#features' },
  { label: 'Compare', href: '#compare' },
  { label: 'Pricing', href: '#pricing' },
  { label: 'FAQ', href: '#faq' },
];
---

<!-- Fixed wrapper: announcement bar + nav bar -->
<div id="site-header-wrapper" class="fixed top-0 left-0 right-0 z-50">

  <!-- Announcement bar -->
  <div id="announcement-bar" class="bg-gradient-to-r from-slate-900 via-emerald-950/50 to-slate-900 border-b border-emerald-500/25 text-center py-2 px-10 relative">
    <p class="text-xs sm:text-sm text-slate-300 font-medium leading-tight">
      <span class="inline-flex items-center gap-2 flex-wrap justify-center">
        <span class="bg-emerald-500 text-white text-[10px] font-extrabold px-2 py-0.5 rounded-full uppercase tracking-widest">Beta</span>
        <span class="sm:hidden">We're <strong class="text-white">free forever</strong> — no catch.</span>
        <span class="hidden sm:inline">Mint shut down. YNAB costs $120/yr. We're <strong class="text-white">free forever</strong> — and better.</span>
        <a href={APP_URL} class="text-emerald-400 hover:text-emerald-300 font-bold underline underline-offset-2 transition-colors whitespace-nowrap">Join free →</a>
      </span>
    </p>
    <button id="close-bar" class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300 transition-colors" aria-label="Dismiss announcement">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <!-- Nav bar -->
  <div id="header" class="transition-all duration-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">

        <!-- Logo -->
        <a href="/" class="flex items-center gap-2.5 group">
          <img
            src="/icon-192x192.png"
            alt="Expense Tracker"
            width="32"
            height="32"
            class="w-8 h-8 rounded-lg shadow-lg shadow-emerald-500/30 group-hover:shadow-emerald-500/50 transition-shadow object-cover"
          />
          <span class="text-white font-bold text-lg tracking-tight hidden sm:inline">Expense Tracker</span>
          <span class="bg-emerald-500/15 border border-emerald-500/30 text-emerald-400 text-[10px] font-bold px-1.5 py-0.5 rounded-md uppercase tracking-wide hidden md:inline-flex">Beta</span>
        </a>

        <!-- Desktop Nav -->
        <nav class="hidden md:flex items-center gap-8">
          {navLinks.map((link) => (
            <a
              href={link.href}
              class="text-slate-400 hover:text-white text-sm font-medium transition-colors"
            >
              {link.label}
            </a>
          ))}
        </nav>

        <!-- CTA -->
        <div class="flex items-center gap-3">
          <a
            href={APP_URL}
            class="hidden sm:block text-slate-400 hover:text-white text-sm font-medium transition-colors"
          >
            Sign In
          </a>
          <a
            href={APP_URL}
            class="bg-emerald-500 hover:bg-emerald-400 text-white text-sm font-semibold px-4 py-2 rounded-lg transition-colors shadow-lg shadow-emerald-500/20 whitespace-nowrap"
          >
            <span class="sm:hidden">Start Free</span>
            <span class="hidden sm:inline">Get Started Free</span>
          </a>

          <!-- Mobile menu button -->
          <button
            id="menu-btn"
            class="md:hidden text-slate-400 hover:text-white p-1"
            aria-label="Toggle menu"
          >
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Nav -->
    <div
      id="mobile-menu"
      class="hidden md:hidden border-t border-slate-800 bg-slate-950/95 backdrop-blur"
    >
      <div class="max-w-7xl mx-auto px-4 py-4 flex flex-col gap-4">
        {navLinks.map((link) => (
          <a
            href={link.href}
            class="text-slate-300 hover:text-white text-sm font-medium transition-colors"
          >
            {link.label}
          </a>
        ))}
        <a
          href={APP_URL}
          class="bg-emerald-500 hover:bg-emerald-400 text-white text-sm font-semibold px-4 py-2.5 rounded-lg text-center transition-colors mt-2"
        >
          Get Started Free
        </a>
      </div>
    </div>
  </div>

</div>

<script>
  // Announcement bar close
  const closeBar = document.getElementById('close-bar');
  const announcementBar = document.getElementById('announcement-bar');
  closeBar?.addEventListener('click', () => {
    announcementBar?.classList.add('hidden');
  });

  // Sticky header background on scroll
  const header = document.getElementById('header');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 20) {
      header?.classList.add('bg-slate-950/90', 'backdrop-blur-md', 'border-b', 'border-slate-800/50', 'shadow-xl');
    } else {
      header?.classList.remove('bg-slate-950/90', 'backdrop-blur-md', 'border-b', 'border-slate-800/50', 'shadow-xl');
    }
  });

  // Mobile menu toggle
  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  menuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Close mobile menu on link click
  mobileMenu?.querySelectorAll('a').forEach((link) => {
    link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
  });
</script>
